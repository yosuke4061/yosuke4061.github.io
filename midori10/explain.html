<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>SuperShape3D 関数の解説</title>
</head>
<body>
    <div id="topBar">
    <button id="backButton" style="position: absolute; top: 10px; left: 10px; background-color: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">閉じる</button>
SuperShape3D 関数の解説
</div>
<script>
    document.getElementById('backButton').addEventListener('click', function() {
        window.close();
    });
</script>
    <h1>SuperShape3D 関数の解説</h1>
    <p>この関数は、THREE.js ライブラリを使用して、特定の数学的パラメータに基づいて3D形状を生成し、それらをシーンに追加します。</p>

    <h2>関数の概要</h2>
    <p>関数 <code>createSuperShape3D</code> は、以下の主要なステップで構成されています:</p>
    <ol>
        <li>照明の設定</li>
        <li>形状の生成と配置</li>
        <li>形状の属性の設定</li>
        <li>形状のシーンへの追加</li>
    </ol>

    <h2>照明の設定</h2>
    <p>シーンには <code>PointLight</code> が追加され、形状が明るく表示されるようにします。</p>
    <pre><code>const light = new THREE.PointLight(0xffffff, 1, 1000);
light.position.set(50, 50, 50);
scene.add(light);</code></pre>
    <p>ここで、<code>PointLight</code> の色は白（0xffffff）、強度は1、距離は1000と設定されています。光源は座標 (50, 50, 50) に配置されます。</p>

    <h2>形状の生成と配置</h2>
    <p>ループを使用して500個の形状を生成し、それぞれにランダムな位置を設定します。</p>
    <pre><code>for (let n = 0; n < numShapes; n++) {
    // 形状のデータを計算
    // 形状をシーンに追加
}</code></pre>
    <p>各形状は、スーパーフォーミュラに基づいて計算された頂点で構成されます。これには、角度 <code>phi</code> と <code>theta</code> を使用して球面座標を計算し、それをカートジアン座標に変換します。</p>

    <h2>形状の属性の設定</h2>
    <p>各形状には、色、シェーディング、金属感、粗さなどのマテリアル属性が設定されます。</p>
    <pre><code>const material = new THREE.MeshStandardMaterial({
    color: new THREE.Color().setHSL(Math.random(), 1.0, 0.75),
    flatShading: true,
    metalness: 0.5,
    roughness: 0.3
});</code></pre>
    <p>色はHSL形式でランダムに設定され、フラットシェーディングが適用されます。</p>

    <h2>形状のシーンへの追加</h2>
    <p>最後に、各形状は計算された位置に配置され、シーンに追加されます。</p>
    <pre><code>const shape = new THREE.Mesh(geometry, material);
shape.position.set((Math.random() * spread - spread / 2), (Math.random() * spread - spread / 2), (Math.random* spread - spread / 2));
scene.add(shape);
shapes.push(shape); // 形状を配列に追加
}</code></pre>
<p>ここで、各形状はランダムに生成された位置に配置されます。位置は、指定された<code>spread</code>値に基づいて計算され、シーンの中心からの相対位置として設定されます。</p>

<h2>まとめ</h2>
<p><code>createSuperShape3D</code>関数は、複雑な3D形状を生成し、それらを動的にシーンに配置するための強力なツールです。この関数は、照明、マテリアルの属性、および形状の配置をカスタマイズすることにより、視覚的に魅力的な3Dグラフィックスを作成するのに役立ちます。</p>

<footer>
    <p>このドキュメントは、<code>createSuperShape3D</code>関数の動作と構成を理解するためのものです。さらに詳細な情報やカスタマイズの要望がある場合は、ドキュメントの詳細なセクションを参照するか、専門家に相談してください。</p>
</footer>
</body>
</html>
